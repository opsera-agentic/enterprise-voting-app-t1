# Deployment Report: v17 (e3e1a9b)

**Date:** 2026-02-04
**Version:** e3e1a9b-20260204015120
**Triggered By:** srinivas-source
**Status:** âœ… Successfully Deployed to All Environments
**Total Duration:** ~20 minutes

---

## Table of Contents

1. [Executive Summary](#executive-summary)
2. [Pipeline Overview](#pipeline-overview)
3. [DEV Deployment (Rolling)](#dev-deployment-rolling)
4. [QA Deployment (Canary)](#qa-deployment-canary)
5. [Staging Deployment (Blue-Green)](#staging-deployment-blue-green)
6. [APM Analysis Deep Dive](#apm-analysis-deep-dive)
7. [Kubernetes Objects Created](#kubernetes-objects-created)
8. [Timeline](#timeline)
9. [Rollback Information](#rollback-information)

---

## Executive Summary

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DEPLOYMENT SUMMARY                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  Version:     e3e1a9b (v17 - End-to-End Pipeline Test)                              â”‚
â”‚  Commit:      e3e1a9b - "feat: Update UI for end-to-end pipeline test (v17)"        â”‚
â”‚  Image Tag:   e3e1a9b-20260204015120                                                â”‚
â”‚                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Environment  â”‚  Strategy     â”‚  Duration  â”‚  Analysis  â”‚  Status         â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚  ğŸ”§ DEV       â”‚  Rolling      â”‚  ~2 min    â”‚  None      â”‚  âœ… Healthy     â”‚     â”‚
â”‚  â”‚  ğŸ§ª QA        â”‚  Canary       â”‚  ~11 min   â”‚  3 checks  â”‚  âœ… Healthy     â”‚     â”‚
â”‚  â”‚  ğŸ­ Staging   â”‚  Blue-Green   â”‚  ~3 min    â”‚  1 check   â”‚  âœ… Healthy     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                                      â”‚
â”‚  Total Downtime: 0 seconds (Zero-downtime deployment)                               â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Pipeline Overview

### High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚  Push   â”‚â”€â”€â”€â”€â–ºâ”‚  Build  â”‚â”€â”€â”€â”€â–ºâ”‚   DEV   â”‚â”€â”€â”€â”€â–ºâ”‚   QA    â”‚â”€â”€â”€â”€â–ºâ”‚ Staging â”‚      â”‚
â”‚   â”‚  main   â”‚     â”‚  Image  â”‚     â”‚ Rolling â”‚     â”‚ Canary  â”‚     â”‚ Blue-   â”‚      â”‚
â”‚   â”‚         â”‚     â”‚  + Scan â”‚     â”‚         â”‚     â”‚ 8-step  â”‚     â”‚ Green   â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                         INFRASTRUCTURE LAYER                                 â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚   â”‚
â”‚   â”‚   â”‚   GitHub     â”‚    â”‚     AWS      â”‚    â”‚  Kubernetes  â”‚                  â”‚   â”‚
â”‚   â”‚   â”‚   Actions    â”‚â”€â”€â”€â–ºâ”‚     ECR      â”‚â”€â”€â”€â–ºâ”‚    EKS       â”‚                  â”‚   â”‚
â”‚   â”‚   â”‚   (CI/CD)    â”‚    â”‚  (Registry)  â”‚    â”‚  (Runtime)   â”‚                  â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚   â”‚
â”‚   â”‚                                                    â”‚                         â”‚   â”‚
â”‚   â”‚                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚   â”‚
â”‚   â”‚                                           â–¼                 â–¼                â”‚   â”‚
â”‚   â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚   â”‚
â”‚   â”‚                                    â”‚  ArgoCD   â”‚     â”‚   Argo    â”‚           â”‚   â”‚
â”‚   â”‚                                    â”‚  (GitOps) â”‚     â”‚ Rollouts  â”‚           â”‚   â”‚
â”‚   â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Cluster Topology

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              AWS us-west-2 Region                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚     HUB CLUSTER             â”‚      â”‚          SPOKE CLUSTER                  â”‚  â”‚
â”‚   â”‚     argocd-usw2             â”‚      â”‚          opsera-usw2-np                 â”‚  â”‚
â”‚   â”‚                             â”‚      â”‚                                         â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚      â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚   â”‚   â”‚     ArgoCD        â”‚    â”‚ â”€â”€â”€â”€â–ºâ”‚   â”‚  Namespace: voting01-dev        â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   GitOps Engine   â”‚    â”‚      â”‚   â”‚  Strategy: Rolling              â”‚   â”‚  â”‚
â”‚   â”‚   â”‚                   â”‚    â”‚      â”‚   â”‚  Replicas: 1                    â”‚   â”‚  â”‚
â”‚   â”‚   â”‚ Applications:     â”‚    â”‚      â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚   â”‚   â”‚ â€¢ voting01-dev    â”‚    â”‚      â”‚                                         â”‚  â”‚
â”‚   â”‚   â”‚ â€¢ voting01-qa     â”‚    â”‚ â”€â”€â”€â”€â–ºâ”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚   â”‚   â”‚ â€¢ voting01-stagingâ”‚    â”‚      â”‚   â”‚  Namespace: voting01-qa         â”‚   â”‚  â”‚
â”‚   â”‚   â”‚                   â”‚    â”‚      â”‚   â”‚  Strategy: Canary               â”‚   â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â”‚   â”‚  Replicas: 2                    â”‚   â”‚  â”‚
â”‚   â”‚                             â”‚      â”‚   â”‚  Steps: 8 (20%â†’50%â†’100%)       â”‚   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚                                        â”‚                                         â”‚  â”‚
â”‚                                   â”€â”€â”€â”€â–ºâ”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚                                        â”‚   â”‚  Namespace: voting01-staging    â”‚   â”‚  â”‚
â”‚                                        â”‚   â”‚  Strategy: Blue-Green           â”‚   â”‚  â”‚
â”‚                                        â”‚   â”‚  Replicas: 3                    â”‚   â”‚  â”‚
â”‚                                        â”‚   â”‚  autoPromotionEnabled: false    â”‚   â”‚  â”‚
â”‚                                        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚                                        â”‚                                         â”‚  â”‚
â”‚                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## DEV Deployment (Rolling)

### Strategy: Kubernetes Rolling Update

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           DEV ROLLING DEPLOYMENT                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   Time: 01:50:29 UTC â†’ 01:52:08 UTC (Duration: ~2 minutes)                          â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  BEFORE                              DURING                       AFTER     â”‚   â”‚
â”‚   â”‚                                                                             â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚   â”‚  â”‚ v16 â”‚                        â”‚ v16 â”‚  â”‚ v17 â”‚               â”‚ v17 â”‚     â”‚   â”‚
â”‚   â”‚  â”‚ Pod â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º   â”‚ Pod â”‚  â”‚ Pod â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚ Pod â”‚     â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚   â”‚                                    â”‚        â”‚                              â”‚   â”‚
â”‚   â”‚  100% traffic                   50%      50%                  100% traffic â”‚   â”‚
â”‚   â”‚  to v16                         each                           to v17      â”‚   â”‚
â”‚   â”‚                                                                             â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   Process:                                                                           â”‚
â”‚   1. Kustomization updated with new image tag                                       â”‚
â”‚   2. ArgoCD detects drift and triggers sync                                         â”‚
â”‚   3. Kubernetes creates new pod with v17                                            â”‚
â”‚   4. Health check passes (readiness probe)                                          â”‚
â”‚   5. Old v16 pod terminated                                                         â”‚
â”‚   6. Service endpoints updated                                                      â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### DEV Workflow Jobs

| Job | Duration | Status | Purpose |
|-----|----------|--------|---------|
| ğŸ”’ Security Scan | 15s | âœ… | Gitleaks secret detection |
| ğŸ“Š SonarQube | 45s | âš ï¸ | Code quality (non-blocking) |
| ğŸ—ï¸ Build Vote | 1m 30s | âœ… | Docker build + Grype scan |
| ğŸ—ï¸ Build Result | 1m 20s | âœ… | Docker build + Grype scan |
| ğŸ—ï¸ Build Worker | 1m 25s | âœ… | Docker build + Grype scan |
| ğŸš€ Deploy | 30s | âœ… | Kustomize + ArgoCD sync |
| ğŸ“¢ Slack | 3s | âœ… | Notification |

---

## QA Deployment (Canary)

### Strategy: Progressive Traffic Shifting with APM Analysis

The QA environment uses Argo Rollouts with a canary strategy that progressively shifts traffic while validating application health through APM metrics.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              QA CANARY DEPLOYMENT                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   Duration: 01:54:38 UTC â†’ 02:05:58 UTC (~11 minutes)                               â”‚
â”‚                                                                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚   STEP 0: DEPLOY CANARY PODS                                                        â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â”‚                                                                       â”‚         â”‚
â”‚   â”‚   STABLE (v16)                    CANARY (v17)                       â”‚         â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”                    â”‚         â”‚
â”‚   â”‚   â”‚ Pod â”‚ â”‚ Pod â”‚                 â”‚ Pod â”‚ â”‚ Pod â”‚                    â”‚         â”‚
â”‚   â”‚   â”‚  1  â”‚ â”‚  2  â”‚                 â”‚  1  â”‚ â”‚  2  â”‚                    â”‚         â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜                    â”‚         â”‚
â”‚   â”‚       â–²                               â–²                              â”‚         â”‚
â”‚   â”‚       â”‚                               â”‚                              â”‚         â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”´â”€â”€â”€â”                       â”Œâ”€â”€â”€â”´â”€â”€â”€â”                          â”‚         â”‚
â”‚   â”‚   â”‚ vote  â”‚                       â”‚ vote- â”‚                          â”‚         â”‚
â”‚   â”‚   â”‚ (svc) â”‚                       â”‚ canaryâ”‚                          â”‚         â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚ (svc) â”‚                          â”‚         â”‚
â”‚   â”‚                                   â””â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚         â”‚
â”‚   â”‚                                                                       â”‚         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚   STEP 1: SET WEIGHT 20%                                                            â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                      â”‚
â”‚   Time: 01:55:12 UTC                                                                â”‚
â”‚                                                                                      â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚                        â”‚   NGINX INGRESS  â”‚                                         â”‚
â”‚                        â”‚  (Traffic Split) â”‚                                         â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚                                 â”‚                                                   â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚                    â”‚                         â”‚                                      â”‚
â”‚                    â–¼                         â–¼                                      â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚               â”‚   80%   â”‚              â”‚   20%   â”‚                                  â”‚
â”‚               â”‚ STABLE  â”‚              â”‚ CANARY  â”‚                                  â”‚
â”‚               â”‚  (v16)  â”‚              â”‚  (v17)  â”‚                                  â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                                                      â”‚
â”‚   Annotation on Ingress:                                                            â”‚
â”‚   nginx.ingress.kubernetes.io/canary-weight: "20"                                   â”‚
â”‚                                                                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚   STEP 2: PAUSE 2 MINUTES                                                           â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                      â”‚
â”‚   Time: 01:55:12 - 01:57:12 UTC                                                     â”‚
â”‚   Purpose: Allow traffic to flow to canary, collect initial metrics                 â”‚
â”‚                                                                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚   STEP 3: HEALTH CHECK ANALYSIS                                                     â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                      â”‚
â”‚   AnalysisRun: vote-7cd75c6d7c-34-2                                                 â”‚
â”‚   Template: voting01-health-check                                                   â”‚
â”‚   Time: 01:56:59 UTC                                                                â”‚
â”‚   Result: âœ… Successful                                                             â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Analysis Job Execution:                                                    â”‚   â”‚
â”‚   â”‚                                                                             â”‚   â”‚
â”‚   â”‚  1. Kubernetes Job created in voting01-qa namespace                         â”‚   â”‚
â”‚   â”‚  2. Pod runs curl command:                                                  â”‚   â”‚
â”‚   â”‚     curl -s -o /dev/null -w "%{http_code}" \                               â”‚   â”‚
â”‚   â”‚       "http://vote-canary.voting01-qa.svc.cluster.local/"                  â”‚   â”‚
â”‚   â”‚  3. Check HTTP response code == 200                                         â”‚   â”‚
â”‚   â”‚  4. Repeat 5 times at 30s intervals                                         â”‚   â”‚
â”‚   â”‚  5. Success: 5/5 checks passed                                              â”‚   â”‚
â”‚   â”‚                                                                             â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚   STEP 4: SET WEIGHT 50%                                                            â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                      â”‚
â”‚   Time: 01:59:29 UTC                                                                â”‚
â”‚                                                                                      â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚                    â”‚                         â”‚                                      â”‚
â”‚                    â–¼                         â–¼                                      â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚               â”‚   50%   â”‚              â”‚   50%   â”‚                                  â”‚
â”‚               â”‚ STABLE  â”‚              â”‚ CANARY  â”‚                                  â”‚
â”‚               â”‚  (v16)  â”‚              â”‚  (v17)  â”‚                                  â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚   STEP 5: PAUSE 3 MINUTES                                                           â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                      â”‚
â”‚   Time: 01:59:29 - 02:02:29 UTC                                                     â”‚
â”‚   Purpose: Significant traffic exposure, collect APM metrics                        â”‚
â”‚                                                                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚   STEP 6: APM ERROR RATE ANALYSIS                                                   â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                      â”‚
â”‚   AnalysisRun: vote-7cd75c6d7c-34-5                                                 â”‚
â”‚   Template: voting01-canary-analysis                                                â”‚
â”‚   Time: 02:02:23 UTC                                                                â”‚
â”‚   Result: âœ… Successful (Error Rate: 0% < 2% threshold)                             â”‚
â”‚                                                                                      â”‚
â”‚   [SEE APM ANALYSIS DEEP DIVE SECTION FOR DETAILS]                                  â”‚
â”‚                                                                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚   STEP 7: SET WEIGHT 100%                                                           â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                      â”‚
â”‚   Time: 02:04:46 UTC                                                                â”‚
â”‚                                                                                      â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚                    â”‚                         â”‚                                      â”‚
â”‚                    â–¼                         â–¼                                      â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚               â”‚    0%   â”‚              â”‚  100%   â”‚                                  â”‚
â”‚               â”‚ STABLE  â”‚              â”‚ CANARY  â”‚                                  â”‚
â”‚               â”‚  (v16)  â”‚              â”‚  (v17)  â”‚                                  â”‚
â”‚               â”‚(scaling â”‚              â”‚         â”‚                                  â”‚
â”‚               â”‚  down)  â”‚              â”‚         â”‚                                  â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚   STEP 8: FINAL APM ANALYSIS                                                        â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                      â”‚
â”‚   AnalysisRun: vote-7cd75c6d7c-34-8                                                 â”‚
â”‚   Template: voting01-canary-analysis                                                â”‚
â”‚   Time: 02:04:46 UTC                                                                â”‚
â”‚   Result: âœ… Successful                                                             â”‚
â”‚                                                                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚   STEP 9: ROLLOUT COMPLETE                                                          â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                      â”‚
â”‚   Time: 02:05:58 UTC                                                                â”‚
â”‚   Final State:                                                                       â”‚
â”‚   - Phase: Healthy                                                                   â”‚
â”‚   - Stable RS: vote-7cd75c6d7c (2 replicas)                                         â”‚
â”‚   - Old RS: vote-54bc444575 (0 replicas, deleted)                                   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### QA Canary Steps Configuration

```yaml
# From vote-rollout.yaml (QA)
spec:
  strategy:
    canary:
      steps:
        - setWeight: 20      # Step 0: 20% to canary
        - pause:
            duration: 2m     # Step 1: Wait 2 minutes
        - analysis:          # Step 2-3: Health check
            templates:
              - templateName: voting01-health-check
        - setWeight: 50      # Step 4: 50% to canary
        - pause:
            duration: 3m     # Step 5: Wait 3 minutes
        - analysis:          # Step 6: APM analysis
            templates:
              - templateName: voting01-canary-analysis
            args:
              - name: error-threshold
                value: "2"   # 2% error rate threshold
        - setWeight: 100     # Step 7: 100% to canary
        - pause:
            duration: 1m     # Step 8: Final wait
        - analysis:          # Step 9: Final APM check
            templates:
              - templateName: voting01-canary-analysis
```

---

## Staging Deployment (Blue-Green)

### Strategy: Zero-Downtime with Preview URL

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           STAGING BLUE-GREEN DEPLOYMENT                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   Duration: 02:06:40 UTC â†’ 02:09:46 UTC (~3 minutes)                                â”‚
â”‚                                                                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚   PHASE 1: DEPLOY PREVIEW (GREEN)                                                   â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                      â”‚
â”‚   Time: 02:06:40 UTC                                                                â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                             â”‚   â”‚
â”‚   â”‚   USERS (Production Traffic)                                                â”‚   â”‚
â”‚   â”‚           â”‚                                                                 â”‚   â”‚
â”‚   â”‚           â–¼                                                                 â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                         â”‚   â”‚
â”‚   â”‚   â”‚    Ingress    â”‚                                                         â”‚   â”‚
â”‚   â”‚   â”‚vote-voting01- â”‚                                                         â”‚   â”‚
â”‚   â”‚   â”‚staging.agent. â”‚                                                         â”‚   â”‚
â”‚   â”‚   â”‚opsera.dev     â”‚                                                         â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                         â”‚   â”‚
â”‚   â”‚           â”‚                                                                 â”‚   â”‚
â”‚   â”‚           â–¼                                                                 â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚   â”‚
â”‚   â”‚   â”‚  vote (svc)   â”‚           â”‚ vote-preview  â”‚                            â”‚   â”‚
â”‚   â”‚   â”‚  ACTIVE       â”‚           â”‚    (svc)      â”‚                            â”‚   â”‚
â”‚   â”‚   â”‚ selector:     â”‚           â”‚  selector:    â”‚                            â”‚   â”‚
â”‚   â”‚   â”‚ hash=55b5     â”‚           â”‚  hash=79bd    â”‚                            â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚   â”‚
â”‚   â”‚           â”‚                           â”‚                                     â”‚   â”‚
â”‚   â”‚           â–¼                           â–¼                                     â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚   â”‚
â”‚   â”‚   â”‚   BLUE (OLD)  â”‚           â”‚  GREEN (NEW)  â”‚                            â”‚   â”‚
â”‚   â”‚   â”‚     v16       â”‚           â”‚     v17       â”‚                            â”‚   â”‚
â”‚   â”‚   â”‚   3 pods      â”‚           â”‚   3 pods      â”‚                            â”‚   â”‚
â”‚   â”‚   â”‚  55b5df5cfc   â”‚           â”‚  79bd65fcc9   â”‚                            â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚   â”‚
â”‚   â”‚                                       â–²                                     â”‚   â”‚
â”‚   â”‚                                       â”‚                                     â”‚   â”‚
â”‚   â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                            â”‚   â”‚
â”‚   â”‚                               â”‚    Ingress    â”‚                            â”‚   â”‚
â”‚   â”‚                               â”‚vote-voting01- â”‚                            â”‚   â”‚
â”‚   â”‚                               â”‚staging-previewâ”‚â—„â”€â”€â”€â”€â”€ TESTERS             â”‚   â”‚
â”‚   â”‚                               â”‚.agent.opsera. â”‚                            â”‚   â”‚
â”‚   â”‚                               â”‚dev            â”‚                            â”‚   â”‚
â”‚   â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚   â”‚
â”‚   â”‚                                                                             â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚   PHASE 2: PRE-PROMOTION ANALYSIS                                                   â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                      â”‚
â”‚   AnalysisRun: vote-79bd65fcc9-22-pre                                               â”‚
â”‚   Template: voting01-bluegreen-analysis                                             â”‚
â”‚   Time: 02:06:51 UTC                                                                â”‚
â”‚   Result: âœ… Successful                                                             â”‚
â”‚                                                                                      â”‚
â”‚   Checks performed:                                                                 â”‚
â”‚   1. HTTP health check on vote-preview service                                      â”‚
â”‚   2. 5 attempts at 30s intervals                                                    â”‚
â”‚   3. All returned HTTP 200                                                          â”‚
â”‚                                                                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚   PHASE 3: PAUSED (AWAITING MANUAL PROMOTION)                                       â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                      â”‚
â”‚   Time: 02:09:04 UTC                                                                â”‚
â”‚   Rollout Status: Paused                                                            â”‚
â”‚                                                                                      â”‚
â”‚   During this phase:                                                                â”‚
â”‚   - Production traffic continues to BLUE (v16)                                      â”‚
â”‚   - Preview URL serves GREEN (v17) for testing                                      â”‚
â”‚   - No user impact while validating                                                 â”‚
â”‚                                                                                      â”‚
â”‚   URLs:                                                                             â”‚
â”‚   - Active:  https://vote-voting01-staging.agent.opsera.dev        (v16)           â”‚
â”‚   - Preview: https://vote-voting01-staging-preview.agent.opsera.dev (v17)          â”‚
â”‚                                                                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚   PHASE 4: MANUAL PROMOTION                                                         â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                      â”‚
â”‚   Time: 02:09:28 UTC                                                                â”‚
â”‚   Triggered by: srinivas-source via GitHub Actions workflow                         â”‚
â”‚   Command: kubectl-argo-rollouts promote vote -n voting01-staging                   â”‚
â”‚                                                                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚   PHASE 5: TRAFFIC SWITCH                                                           â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                      â”‚
â”‚   Time: 02:09:46 UTC                                                                â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                             â”‚   â”‚
â”‚   â”‚   AFTER PROMOTION:                                                          â”‚   â”‚
â”‚   â”‚                                                                             â”‚   â”‚
â”‚   â”‚   USERS (Production Traffic)                                                â”‚   â”‚
â”‚   â”‚           â”‚                                                                 â”‚   â”‚
â”‚   â”‚           â–¼                                                                 â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                         â”‚   â”‚
â”‚   â”‚   â”‚    Ingress    â”‚                                                         â”‚   â”‚
â”‚   â”‚   â”‚    (Active)   â”‚                                                         â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                         â”‚   â”‚
â”‚   â”‚           â”‚                                                                 â”‚   â”‚
â”‚   â”‚           â–¼                                                                 â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚   â”‚
â”‚   â”‚   â”‚  vote (svc)   â”‚           â”‚ vote-preview  â”‚                            â”‚   â”‚
â”‚   â”‚   â”‚  ACTIVE       â”‚           â”‚    (svc)      â”‚                            â”‚   â”‚
â”‚   â”‚   â”‚ selector:     â”‚           â”‚  selector:    â”‚                            â”‚   â”‚
â”‚   â”‚   â”‚ hash=79bd â—„â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€ hash=79bd   â”‚   (Both point to GREEN)   â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚   â”‚
â”‚   â”‚           â”‚                           â”‚                                     â”‚   â”‚
â”‚   â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚   â”‚
â”‚   â”‚                       â–¼                                                     â”‚   â”‚
â”‚   â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚   â”‚
â”‚   â”‚               â”‚  GREEN (NEW)  â”‚           â”‚   BLUE (OLD)  â”‚                â”‚   â”‚
â”‚   â”‚               â”‚     v17       â”‚           â”‚     v16       â”‚                â”‚   â”‚
â”‚   â”‚               â”‚   3 pods      â”‚           â”‚   0 pods      â”‚                â”‚   â”‚
â”‚   â”‚               â”‚  79bd65fcc9   â”‚           â”‚  (scaled down)â”‚                â”‚   â”‚
â”‚   â”‚               â”‚   ACTIVE âœ“    â”‚           â”‚  55b5df5cfc   â”‚                â”‚   â”‚
â”‚   â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚   â”‚
â”‚   â”‚                                                                             â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   Final State:                                                                       â”‚
â”‚   - Phase: Healthy                                                                   â”‚
â”‚   - Active RS: vote-79bd65fcc9 (v17, 3 replicas)                                    â”‚
â”‚   - Preview RS: vote-79bd65fcc9 (same as active)                                    â”‚
â”‚   - Old RS: vote-55b5df5cfc (v16, 0 replicas)                                       â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Blue-Green Configuration

```yaml
# From vote-rollout.yaml (Staging)
spec:
  replicas: 3
  strategy:
    blueGreen:
      activeService: vote
      previewService: vote-preview
      autoPromotionEnabled: false  # Manual promotion required
      scaleDownDelaySeconds: 30
      prePromotionAnalysis:
        templates:
          - templateName: voting01-bluegreen-analysis
        args:
          - name: service-name
            value: vote-preview
          - name: namespace
            value: voting01-staging
```

---

## APM Analysis Deep Dive

### How APM-Driven Canary Analysis Works

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              APM ANALYSIS ARCHITECTURE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚  Vote App   â”‚â”€â”€â”€â”€â–ºâ”‚   Ingress   â”‚â”€â”€â”€â”€â–ºâ”‚  New Relic  â”‚â”€â”€â”€â”€â–ºâ”‚  Analysis   â”‚      â”‚
â”‚   â”‚  (Canary)   â”‚     â”‚  (Traffic)  â”‚     â”‚    APM      â”‚     â”‚  Template   â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                  â”‚                    â”‚             â”‚
â”‚   Sends metrics:                                 â”‚                    â”‚             â”‚
â”‚   - Response time                                â”‚                    â”‚             â”‚
â”‚   - Error rate                                   â–¼                    â”‚             â”‚
â”‚   - Throughput                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚             â”‚
â”‚                                          â”‚  Mock NR    â”‚             â”‚             â”‚
â”‚                                          â”‚  Server     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                          â”‚  (Dev/QA)   â”‚                           â”‚
â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                  â”‚                                  â”‚
â”‚                                                  â”‚ REST API                         â”‚
â”‚                                                  â–¼                                  â”‚
â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                                          â”‚   Argo      â”‚                           â”‚
â”‚                                          â”‚ Rollouts    â”‚                           â”‚
â”‚                                          â”‚ Controller  â”‚                           â”‚
â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                  â”‚                                  â”‚
â”‚                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚                                     â”‚                         â”‚                    â”‚
â”‚                                     â–¼                         â–¼                    â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚                              â”‚  CONTINUE   â”‚          â”‚  ROLLBACK   â”‚              â”‚
â”‚                              â”‚  (Pass)     â”‚          â”‚  (Fail)     â”‚              â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Analysis Template: voting01-canary-analysis

```yaml
apiVersion: argoproj.io/v1alpha1
kind: AnalysisTemplate
metadata:
  name: voting01-canary-analysis
  namespace: voting01-qa
spec:
  args:
    - name: service-name      # e.g., "vote-canary"
    - name: namespace         # e.g., "voting01-qa"
    - name: app-name          # e.g., "voting01-vote-qa"
    - name: error-threshold
      value: "2"              # 2% error rate threshold

  metrics:
    # METRIC 1: HTTP Health Check
    - name: http-health
      count: 3                # Run 3 times
      interval: 30s           # Every 30 seconds
      failureLimit: 1         # Fail if 1 check fails
      successCondition: result == "healthy"
      provider:
        job:
          spec:
            template:
              spec:
                containers:
                  - name: health-check
                    image: curlimages/curl:latest
                    command: ["/bin/sh", "-c"]
                    args:
                      - |
                        HTTP_CODE=$(curl -s -o /dev/null -w "%{http_code}" \
                          "http://{{args.service-name}}.{{args.namespace}}.svc.cluster.local/" \
                          --max-time 10)
                        if [ "$HTTP_CODE" = "200" ]; then
                          echo "healthy"
                          exit 0
                        else
                          echo "unhealthy: HTTP $HTTP_CODE"
                          exit 1
                        fi

    # METRIC 2: New Relic Error Rate
    - name: error-rate
      count: 2                # Run 2 times
      interval: 60s           # Every 60 seconds
      failureLimit: 1         # Fail if 1 check fails
      successCondition: result.errorRate < {{args.error-threshold}}
      provider:
        job:
          spec:
            template:
              spec:
                containers:
                  - name: newrelic-check
                    image: curlimages/curl:latest
                    env:
                      - name: NEW_RELIC_HOST
                        valueFrom:
                          configMapKeyRef:
                            name: voting01-config
                            key: NEW_RELIC_HOST
                            optional: true
                    command: ["/bin/sh", "-c"]
                    args:
                      - |
                        APP_NAME="{{args.app-name}}"
                        THRESHOLD={{args.error-threshold}}
                        NR_HOST="${NEW_RELIC_HOST:-opsera-opsera-newrelic-dev.agent.opsera.dev}"

                        # Query New Relic API
                        RESPONSE=$(curl -s --max-time 30 \
                          "https://${NR_HOST}/v1/metrics?app=${APP_NAME}&metric=errorRate&window=5m")

                        # Parse error rate
                        ERROR_RATE=$(echo "$RESPONSE" | grep -oE '"errorRate"[[:space:]]*:[[:space:]]*[0-9.]+' \
                          | grep -oE '[0-9.]+$' || echo "0")

                        echo "Error Rate: ${ERROR_RATE}% (threshold: ${THRESHOLD}%)"

                        # Compare against threshold
                        RESULT=$(awk -v rate="$ERROR_RATE" -v threshold="$THRESHOLD" \
                          'BEGIN { if (rate < threshold) print "PASS"; else print "FAIL" }')

                        if [ "$RESULT" = "PASS" ]; then
                          echo '{"errorRate": '"$ERROR_RATE"'}'
                          exit 0
                        else
                          echo "âŒ Error rate exceeds threshold - triggering rollback"
                          exit 1
                        fi
```

### New Relic API Query

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              NEW RELIC API QUERY                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   Endpoint: https://opsera-opsera-newrelic-dev.agent.opsera.dev/v1/metrics          â”‚
â”‚                                                                                      â”‚
â”‚   Request:                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  GET /v1/metrics?app=voting01-vote-qa&metric=errorRate&window=5m            â”‚   â”‚
â”‚   â”‚                                                                             â”‚   â”‚
â”‚   â”‚  Headers:                                                                   â”‚   â”‚
â”‚   â”‚    Content-Type: application/json                                           â”‚   â”‚
â”‚   â”‚    Api-Key: ${NEW_RELIC_API_KEY}                                            â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   Response (Success - errorRate < 2%):                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  {                                                                          â”‚   â”‚
â”‚   â”‚    "app": "voting01-vote-qa",                                               â”‚   â”‚
â”‚   â”‚    "metric": "errorRate",                                                   â”‚   â”‚
â”‚   â”‚    "window": "5m",                                                          â”‚   â”‚
â”‚   â”‚    "errorRate": 0.5,                                                        â”‚   â”‚
â”‚   â”‚    "timestamp": "2026-02-04T02:02:23Z"                                      â”‚   â”‚
â”‚   â”‚  }                                                                          â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   Response (Failure - errorRate > 2%):                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  {                                                                          â”‚   â”‚
â”‚   â”‚    "app": "voting01-vote-qa",                                               â”‚   â”‚
â”‚   â”‚    "errorRate": 5.2,    â—„â”€â”€ Exceeds 2% threshold                           â”‚   â”‚
â”‚   â”‚    ...                                                                      â”‚   â”‚
â”‚   â”‚  }                                                                          â”‚   â”‚
â”‚   â”‚                                                                             â”‚   â”‚
â”‚   â”‚  Result: Analysis FAILED â†’ Automatic ROLLBACK triggered                     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Analysis Run Execution Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ANALYSIS RUN EXECUTION                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   AnalysisRun: vote-7cd75c6d7c-34-5 (QA Canary Step 6)                              â”‚
â”‚   Time: 02:02:23 - 02:03:35 UTC                                                     â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                             â”‚   â”‚
â”‚   â”‚   02:02:23  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚      â”‚      â”‚  Kubernetes Job Created                                  â”‚    â”‚   â”‚
â”‚   â”‚      â”‚      â”‚  Name: 88d7862c-672a-4a2a-86ff-ead26e99c89b.http-health.1â”‚    â”‚   â”‚
â”‚   â”‚      â”‚      â”‚  Namespace: voting01-qa                                  â”‚    â”‚   â”‚
â”‚   â”‚      â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â”‚      â”‚                                                                      â”‚   â”‚
â”‚   â”‚      â–¼                                                                      â”‚   â”‚
â”‚   â”‚   02:02:27  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚      â”‚      â”‚  HTTP Health Check #1                                    â”‚    â”‚   â”‚
â”‚   â”‚      â”‚      â”‚  curl http://vote-canary.voting01-qa.svc.cluster.local/  â”‚    â”‚   â”‚
â”‚   â”‚      â”‚      â”‚  Response: 200 OK                                        â”‚    â”‚   â”‚
â”‚   â”‚      â”‚      â”‚  Result: âœ… Successful                                   â”‚    â”‚   â”‚
â”‚   â”‚      â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â”‚      â”‚                                                                      â”‚   â”‚
â”‚   â”‚      â–¼                                                                      â”‚   â”‚
â”‚   â”‚   02:02:57  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚      â”‚      â”‚  HTTP Health Check #2                                    â”‚    â”‚   â”‚
â”‚   â”‚      â”‚      â”‚  Response: 200 OK                                        â”‚    â”‚   â”‚
â”‚   â”‚      â”‚      â”‚  Result: âœ… Successful                                   â”‚    â”‚   â”‚
â”‚   â”‚      â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â”‚      â”‚                                                                      â”‚   â”‚
â”‚   â”‚      â–¼                                                                      â”‚   â”‚
â”‚   â”‚   02:03:31  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚      â”‚      â”‚  HTTP Health Check #3                                    â”‚    â”‚   â”‚
â”‚   â”‚      â”‚      â”‚  Response: 200 OK                                        â”‚    â”‚   â”‚
â”‚   â”‚      â”‚      â”‚  Result: âœ… Successful                                   â”‚    â”‚   â”‚
â”‚   â”‚      â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â”‚      â”‚                                                                      â”‚   â”‚
â”‚   â”‚      â–¼                                                                      â”‚   â”‚
â”‚   â”‚   02:03:35  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚             â”‚  New Relic Error Rate Check                              â”‚    â”‚   â”‚
â”‚   â”‚             â”‚  API: GET /v1/metrics?app=voting01-vote-qa&...           â”‚    â”‚   â”‚
â”‚   â”‚             â”‚  Response: {"errorRate": 0}                              â”‚    â”‚   â”‚
â”‚   â”‚             â”‚  Threshold: 2%                                           â”‚    â”‚   â”‚
â”‚   â”‚             â”‚  Result: âœ… PASS (0% < 2%)                               â”‚    â”‚   â”‚
â”‚   â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â”‚                                                                             â”‚   â”‚
â”‚   â”‚   Final Status: âœ… Successful                                               â”‚   â”‚
â”‚   â”‚   consecutiveSuccess: 3 (http-health)                                       â”‚   â”‚
â”‚   â”‚   consecutiveSuccess: 2 (error-rate)                                        â”‚   â”‚
â”‚   â”‚                                                                             â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### All Analysis Runs Summary

| Run ID | Environment | Time | Template | Checks | Result |
|--------|-------------|------|----------|--------|--------|
| `vote-7cd75c6d7c-34-2` | QA | 01:56:59 | voting01-health-check | HTTP: 5/5 | âœ… Pass |
| `vote-7cd75c6d7c-34-5` | QA | 02:02:23 | voting01-canary-analysis | HTTP: 3/3, APM: 2/2 | âœ… Pass |
| `vote-7cd75c6d7c-34-8` | QA | 02:04:46 | voting01-canary-analysis | HTTP: 3/3, APM: 2/2 | âœ… Pass |
| `vote-79bd65fcc9-22-pre` | Staging | 02:06:51 | voting01-bluegreen-analysis | HTTP: 5/5 | âœ… Pass |

---

## Kubernetes Objects Created

### QA Namespace (voting01-qa)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        KUBERNETES OBJECTS - QA                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   Rollout: vote                                                                     â”‚
â”‚   â”œâ”€â”€ Strategy: Canary                                                              â”‚
â”‚   â”œâ”€â”€ Replicas: 2                                                                   â”‚
â”‚   â”œâ”€â”€ Current Step: 9/9                                                             â”‚
â”‚   â””â”€â”€ Phase: Healthy                                                                â”‚
â”‚                                                                                      â”‚
â”‚   ReplicaSets:                                                                      â”‚
â”‚   â”œâ”€â”€ vote-7cd75c6d7c (ACTIVE - v17)                                                â”‚
â”‚   â”‚   â”œâ”€â”€ Replicas: 2/2 Ready                                                       â”‚
â”‚   â”‚   â”œâ”€â”€ Image: 792373136340.dkr.ecr.us-west-2.amazonaws.com/opsera/              â”‚
â”‚   â”‚   â”‚          voting01-vote:e3e1a9b-20260204015120                               â”‚
â”‚   â”‚   â””â”€â”€ Created: 2026-02-04T01:54:36Z                                             â”‚
â”‚   â”‚                                                                                 â”‚
â”‚   â””â”€â”€ vote-54bc444575 (OLD - v16, TERMINATED)                                       â”‚
â”‚       â”œâ”€â”€ Replicas: 0                                                               â”‚
â”‚       â””â”€â”€ Status: ScaledDown                                                        â”‚
â”‚                                                                                      â”‚
â”‚   Services:                                                                         â”‚
â”‚   â”œâ”€â”€ vote (stable)                                                                 â”‚
â”‚   â”‚   â””â”€â”€ Selector: app=vote, rollouts-pod-template-hash=7cd75c6d7c                â”‚
â”‚   â”‚                                                                                 â”‚
â”‚   â””â”€â”€ vote-canary                                                                   â”‚
â”‚       â””â”€â”€ Selector: app=vote, rollouts-pod-template-hash=7cd75c6d7c                â”‚
â”‚                                                                                      â”‚
â”‚   AnalysisRuns (Last 3):                                                            â”‚
â”‚   â”œâ”€â”€ vote-7cd75c6d7c-34-2 â†’ Successful                                             â”‚
â”‚   â”œâ”€â”€ vote-7cd75c6d7c-34-5 â†’ Successful                                             â”‚
â”‚   â””â”€â”€ vote-7cd75c6d7c-34-8 â†’ Successful                                             â”‚
â”‚                                                                                      â”‚
â”‚   Pods:                                                                             â”‚
â”‚   â”œâ”€â”€ vote-7cd75c6d7c-7hqnx (Running)                                               â”‚
â”‚   â””â”€â”€ vote-7cd75c6d7c-9kmvp (Running)                                               â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Staging Namespace (voting01-staging)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        KUBERNETES OBJECTS - STAGING                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   Rollout: vote                                                                     â”‚
â”‚   â”œâ”€â”€ Strategy: BlueGreen                                                           â”‚
â”‚   â”œâ”€â”€ Replicas: 3                                                                   â”‚
â”‚   â”œâ”€â”€ autoPromotionEnabled: false                                                   â”‚
â”‚   â””â”€â”€ Phase: Healthy                                                                â”‚
â”‚                                                                                      â”‚
â”‚   ReplicaSets:                                                                      â”‚
â”‚   â”œâ”€â”€ vote-79bd65fcc9 (ACTIVE - v17)                                                â”‚
â”‚   â”‚   â”œâ”€â”€ Replicas: 3/3 Ready                                                       â”‚
â”‚   â”‚   â”œâ”€â”€ Image: 792373136340.dkr.ecr.us-west-2.amazonaws.com/opsera/              â”‚
â”‚   â”‚   â”‚          voting01-vote:e3e1a9b-20260204015120                               â”‚
â”‚   â”‚   â”œâ”€â”€ ActiveSelector: 79bd65fcc9                                                â”‚
â”‚   â”‚   â”œâ”€â”€ PreviewSelector: 79bd65fcc9                                               â”‚
â”‚   â”‚   â””â”€â”€ Created: 2026-02-04T02:06:40Z                                             â”‚
â”‚   â”‚                                                                                 â”‚
â”‚   â””â”€â”€ vote-55b5df5cfc (OLD - v16, TERMINATED)                                       â”‚
â”‚       â”œâ”€â”€ Replicas: 0                                                               â”‚
â”‚       â””â”€â”€ Status: ScaledDown (after scaleDownDelaySeconds: 30)                      â”‚
â”‚                                                                                      â”‚
â”‚   Services:                                                                         â”‚
â”‚   â”œâ”€â”€ vote (active)                                                                 â”‚
â”‚   â”‚   â””â”€â”€ Selector: app=vote, rollouts-pod-template-hash=79bd65fcc9                â”‚
â”‚   â”‚                                                                                 â”‚
â”‚   â””â”€â”€ vote-preview                                                                  â”‚
â”‚       â””â”€â”€ Selector: app=vote, rollouts-pod-template-hash=79bd65fcc9                â”‚
â”‚                                                                                      â”‚
â”‚   AnalysisRuns:                                                                     â”‚
â”‚   â””â”€â”€ vote-79bd65fcc9-22-pre â†’ Successful (Pre-Promotion)                           â”‚
â”‚                                                                                      â”‚
â”‚   Pods:                                                                             â”‚
â”‚   â”œâ”€â”€ vote-79bd65fcc9-abc12 (Running)                                               â”‚
â”‚   â”œâ”€â”€ vote-79bd65fcc9-def34 (Running)                                               â”‚
â”‚   â””â”€â”€ vote-79bd65fcc9-ghi56 (Running)                                               â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Timeline

### Detailed Minute-by-Minute Timeline

| Time (UTC) | Duration | Phase | Environment | Event | Details |
|------------|----------|-------|-------------|-------|---------|
| 01:50:29 | - | Trigger | - | Push to main | Commit `e3e1a9b` by srinivas-source |
| 01:50:35 | +6s | Build | - | Workflow start | ci-build-push-voting01-dev.yaml |
| 01:50:45 | +10s | Build | - | Security scan | Gitleaks - no secrets found |
| 01:51:00 | +25s | Build | - | SonarQube | Code quality analysis |
| 01:51:15 | +40s | Build | - | Docker build | Building vote, result, worker images |
| 01:51:45 | +1m 10s | Build | - | Grype scan | Container vulnerability scan |
| 01:51:55 | +1m 20s | Build | - | ECR push | Images pushed to ECR |
| 01:52:00 | +1m 25s | Deploy | DEV | Kustomize update | newTag: e3e1a9b-20260204015120 |
| 01:52:05 | +1m 30s | Deploy | DEV | ArgoCD sync | Triggered hard refresh |
| 01:52:08 | +1m 33s | Deploy | DEV | Rolling update | New pod created, old terminated |
| 01:53:44 | +3m 9s | Promote | - | QA promotion | Health check of DEV passed |
| 01:54:36 | +4m 1s | Deploy | QA | Canary start | ReplicaSet vote-7cd75c6d7c created |
| 01:54:38 | +4m 3s | Canary | QA | Step 0 | Pods initializing |
| 01:55:12 | +4m 37s | Canary | QA | Step 1 | setWeight: 20% |
| 01:55:12 | +4m 37s | Canary | QA | Step 2 | pause: 2m |
| 01:56:59 | +6m 24s | Analysis | QA | Step 3 | Health check started |
| 01:57:12 | +6m 37s | Canary | QA | Step 3 | Analysis passed âœ… |
| 01:59:29 | +8m 54s | Canary | QA | Step 4 | setWeight: 50% |
| 01:59:29 | +8m 54s | Canary | QA | Step 5 | pause: 3m |
| 02:02:23 | +11m 48s | Analysis | QA | Step 6 | APM analysis started |
| 02:02:37 | +12m 2s | Canary | QA | Step 6 | Analysis passed âœ… |
| 02:04:46 | +14m 11s | Canary | QA | Step 7 | setWeight: 100% |
| 02:04:46 | +14m 11s | Analysis | QA | Step 8 | Final analysis started |
| 02:05:58 | +15m 23s | Canary | QA | Complete | Phase: Healthy |
| 02:06:27 | +15m 52s | Deploy | Staging | Workflow start | Blue-green deployment |
| 02:06:40 | +16m 5s | Deploy | Staging | Preview deploy | ReplicaSet vote-79bd65fcc9 (3 pods) |
| 02:06:51 | +16m 16s | Analysis | Staging | Pre-promotion | Health check started |
| 02:09:04 | +18m 29s | Deploy | Staging | Paused | Awaiting manual promotion |
| 02:09:28 | +18m 53s | Promote | Staging | Manual trigger | User approved via GHA |
| 02:09:46 | +19m 11s | Deploy | Staging | Complete | Traffic switched, Phase: Healthy |

---

## Rollback Information

### Automatic Rollback (Canary)

If the APM analysis had failed (error rate > 2%), Argo Rollouts would have automatically:

1. Aborted the canary deployment
2. Scaled canary pods to 0
3. Restored 100% traffic to stable (v16)
4. Set rollout phase to "Degraded"

```yaml
# Rollback trigger condition
successCondition: result.errorRate < 2  # If false â†’ ROLLBACK
```

### Manual Rollback Commands

```bash
# QA Canary Rollback
kubectl argo rollouts abort vote -n voting01-qa
kubectl argo rollouts undo vote -n voting01-qa

# Staging Blue-Green Rollback
kubectl argo rollouts undo vote -n voting01-staging
# Or simply redeploy previous version via workflow
```

---

## Live URLs

| Environment | Vote App | Result App |
|-------------|----------|------------|
| ğŸ”§ DEV | https://vote-voting01-dev.agent.opsera.dev | https://result-voting01-dev.agent.opsera.dev |
| ğŸ§ª QA | https://vote-voting01-qa.agent.opsera.dev | https://result-voting01-qa.agent.opsera.dev |
| ğŸ­ Staging | https://vote-voting01-staging.agent.opsera.dev | https://result-voting01-staging.agent.opsera.dev |
| ğŸ­ Staging Preview | https://vote-voting01-staging-preview.agent.opsera.dev | - |

---

**Report Generated:** 2026-02-04 02:20 UTC
**Pipeline Version:** e3e1a9b-20260204015120 (v17)
**Total Pipeline Duration:** ~20 minutes
**Status:** âœ… All Environments Healthy
**Downtime:** 0 seconds
